# タスクリスト - TodoリストWebアプリケーション

## 概要

- **総タスク数**: 18タスク
- **推定作業時間**: 2-3日
- **優先度**: 高
- **技術スタック**: React 18.x + TypeScript + Vite

## タスク一覧

### Phase 1: プロジェクトセットアップ（環境構築）

#### Task 1.1: Vite + React + TypeScriptプロジェクトの初期化

- [ ] `npm create vite@latest todo-app -- --template react-ts` でプロジェクト作成
- [ ] 依存パッケージのインストール (`npm install`)
- [ ] 開発サーバーの起動確認 (`npm run dev`)
- [ ] 不要なデフォルトファイルの削除（App.css、index.cssの初期内容など）
- **完了条件**: ブラウザでデフォルトページが表示され、Hot Reloadが動作する
- **依存**: なし
- **推定時間**: 30分

#### Task 1.2: ディレクトリ構造とTypeScript設定

- [ ] `/src/components/`, `/src/context/`, `/src/types/`, `/src/services/`, `/src/hooks/` ディレクトリを作成
- [ ] `tsconfig.json` の strict モードを確認・有効化
- [ ] パスエイリアス設定（オプション）
- **完了条件**: 設計書通りのディレクトリ構造が作成され、TypeScriptの厳格モードが有効
- **依存**: Task 1.1
- **推定時間**: 20分

#### Task 1.3: 開発ツールの設定

- [ ] ESLint設定ファイルの調整（React hooks ルールなど）
- [ ] Prettier設定ファイルの作成（.prettierrc）
- [ ] `.gitignore` の確認と調整
- [ ] package.json に lint スクリプトを追加
- **完了条件**: ESLintとPrettierが正しく動作し、コードフォーマットが統一される
- **依存**: Task 1.1
- **推定時間**: 30分

### Phase 2: 基礎実装（型定義とサービス層）

#### Task 2.1: 型定義の作成

- [ ] `/src/types/todo.ts` を作成
- [ ] `Todo` インターフェースの定義
- [ ] `FilterType` 型の定義
- [ ] `TodoState` インターフェースの定義
- [ ] `TodoAction` 型の定義（全アクションタイプ）
- **完了条件**: すべての型定義が完成し、TypeScriptエラーがない
- **依存**: Task 1.2
- **推定時間**: 30分

#### Task 2.2: StorageServiceの実装

- [ ] `/src/services/StorageService.ts` を作成
- [ ] `save` メソッドの実装（JSON.stringify + try-catch）
- [ ] `load` メソッドの実装（JSON.parse + エラーハンドリング）
- [ ] `remove` メソッドの実装
- [ ] `clear` メソッドの実装
- [ ] QuotaExceededError のハンドリング
- **完了条件**: StorageServiceの全メソッドが正しく動作し、エラーハンドリングが実装されている
- **依存**: Task 2.1
- **推定時間**: 1時間

### Phase 3: 状態管理の実装

#### Task 3.1: Reducerの実装

- [ ] `/src/context/todoReducer.ts` を作成
- [ ] `todoReducer` 関数の実装
- [ ] ADD_TODO アクションの実装（UUID生成含む）
- [ ] TOGGLE_TODO アクションの実装
- [ ] DELETE_TODO アクションの実装
- [ ] UPDATE_TODO アクションの実装
- [ ] SET_FILTER アクションの実装
- [ ] LOAD_TODOS アクションの実装
- **完了条件**: すべてのアクションが正しく状態を更新し、型安全性が保たれている
- **依存**: Task 2.1
- **推定時間**: 1.5時間

#### Task 3.2: TodoContextとProviderの実装

- [ ] `/src/context/TodoContext.tsx` を作成
- [ ] `TodoContext` の作成（createContext）
- [ ] `TodoProvider` コンポーネントの実装
- [ ] `useReducer` で状態管理を実装
- [ ] `useEffect` でlocalStorageへの自動保存を実装
- [ ] 初期表示時にlocalStorageからデータを読み込む処理
- [ ] フィルタリングロジックの実装（useMemoで最適化）
- [ ] Context値のメモ化（useMemo）
- **完了条件**: TodoProviderが正しく状態を管理し、localStorageとの同期が動作する
- **依存**: Task 2.2, Task 3.1
- **推定時間**: 2時間

#### Task 3.3: カスタムフックの実装

- [ ] `/src/hooks/useTodoContext.ts` を作成
- [ ] `useTodoContext` フックの実装
- [ ] Context未設定時のエラーハンドリング
- **完了条件**: コンポーネントから簡単にContextにアクセスできる
- **依存**: Task 3.2
- **推定時間**: 15分

### Phase 4: UIコンポーネントの実装

#### Task 4.1: TodoInputコンポーネントの実装

- [ ] `/src/components/TodoInput/TodoInput.tsx` を作成
- [ ] `/src/components/TodoInput/TodoInput.module.css` を作成
- [ ] inputとbuttonのUIを実装
- [ ] `useState` でinput値を管理
- [ ] フォーム送信時のハンドラー実装（addTodo呼び出し）
- [ ] 空文字列のバリデーション
- [ ] 送信後のフォームクリア
- [ ] スタイリング（レスポンシブ対応）
- **完了条件**: タスクを追加でき、UIが設計通りに表示される
- **依存**: Task 3.3
- **推定時間**: 1.5時間

#### Task 4.2: TodoItemコンポーネントの実装

- [ ] `/src/components/TodoItem/TodoItem.tsx` を作成
- [ ] `/src/components/TodoItem/TodoItem.module.css` を作成
- [ ] チェックボックスUIの実装
- [ ] タスクタイトルの表示
- [ ] 編集ボタンと削除ボタンのUI
- [ ] チェックボックスクリックで `toggleTodo` を呼び出し
- [ ] 削除ボタンクリックで `deleteTodo` を呼び出し
- [ ] インライン編集機能の実装（ダブルクリックまたは編集ボタン）
- [ ] 完了タスクの打ち消し線スタイル
- [ ] スタイリング（ホバーエフェクト、トランジション）
- **完了条件**: タスクの完了切替、編集、削除が正しく動作し、UIが設計通りに表示される
- **依存**: Task 3.3
- **推定時間**: 2時間

#### Task 4.3: TodoListコンポーネントの実装

- [ ] `/src/components/TodoList/TodoList.tsx` を作成
- [ ] `/src/components/TodoList/TodoList.module.css` を作成
- [ ] `filteredTodos` をContextから取得
- [ ] TodoItemを繰り返し表示（map関数）
- [ ] 空状態の表示（タスクがない場合のメッセージ）
- [ ] リストのスタイリング
- **完了条件**: タスク一覧が表示され、フィルタリングが正しく動作する
- **依存**: Task 3.3, Task 4.2
- **推定時間**: 1時間

#### Task 4.4: TodoFilterコンポーネントの実装

- [ ] `/src/components/TodoFilter/TodoFilter.tsx` を作成
- [ ] `/src/components/TodoFilter/TodoFilter.module.css` を作成
- [ ] 「すべて」「未完了」「完了済み」の3ボタンを実装
- [ ] 各ボタンクリックで `setFilter` を呼び出し
- [ ] アクティブなフィルタのハイライト表示
- [ ] スタイリング（ボタングループデザイン）
- **完了条件**: フィルタボタンが動作し、アクティブ状態が視覚的に分かる
- **依存**: Task 3.3
- **推定時間**: 1時間

#### Task 4.5: Appコンポーネントの統合

- [ ] `/src/App.tsx` を編集
- [ ] `/src/App.css` を作成
- [ ] TodoProviderでアプリ全体をラップ
- [ ] ヘッダーの実装
- [ ] TodoInput、TodoFilter、TodoListを配置
- [ ] 全体のレイアウトスタイリング
- [ ] レスポンシブデザインの実装（メディアクエリ）
- **完了条件**: すべてのコンポーネントが統合され、アプリが完全に動作する
- **依存**: Task 4.1, Task 4.2, Task 4.3, Task 4.4
- **推定時間**: 1.5時間

### Phase 5: スタイリングとUX改善

#### Task 5.1: グローバルスタイルとテーマの実装

- [ ] `/src/index.css` でCSSリセットとグローバルスタイルを定義
- [ ] CSS変数でカラースキームを定義
- [ ] フォント設定
- [ ] レスポンシブブレークポイントの定義
- **完了条件**: 統一されたデザインシステムが適用される
- **依存**: なし
- **推定時間**: 1時間

#### Task 5.2: アニメーションとトランジションの追加

- [ ] タスク追加時のフェードイン・スライドダウンアニメーション
- [ ] タスク削除時のフェードアウト・スライドアップアニメーション
- [ ] チェックボックスのスムーズなトランジション
- [ ] ボタンホバーエフェクト
- [ ] CSSアニメーションの実装（@keyframes）
- **完了条件**: スムーズなアニメーションが実装され、UXが向上する
- **依存**: Task 4.5
- **推定時間**: 1.5時間

### Phase 6: テストとバグフィックス

#### Task 6.1: 単体テストの作成

- [ ] Vitest設定ファイルの作成（vite.config.ts）
- [ ] todoReducerのテスト作成（各アクションの動作確認）
- [ ] StorageServiceのテスト作成
- [ ] フィルタリングロジックのテスト
- [ ] `npm run test` コマンドの確認
- **完了条件**: 主要なロジックのテストが作成され、すべてパスする
- **依存**: Task 3.1, Task 2.2
- **推定時間**: 2時間

#### Task 6.2: コンポーネントテストの作成（オプション）

- [ ] React Testing Libraryのセットアップ
- [ ] TodoInputコンポーネントのテスト
- [ ] TodoItemコンポーネントのテスト
- [ ] ユーザーインタラクションのテスト
- **完了条件**: 主要コンポーネントのテストが作成される
- **依存**: Task 4.5
- **推定時間**: 2時間

#### Task 6.3: ブラウザテストとバグフィックス

- [ ] Chrome、Firefox、Safari、Edgeでの動作確認
- [ ] モバイルデバイス（実機またはエミュレータ）での動作確認
- [ ] localStorage容量制限のテスト
- [ ] エッジケースのテスト（空文字、長文、特殊文字など）
- [ ] 発見されたバグの修正
- [ ] パフォーマンスチェック（Lighthouse）
- **完了条件**: 主要ブラウザで問題なく動作し、重大なバグがない
- **依存**: Task 4.5
- **推定時間**: 2時間

### Phase 7: 最終調整とドキュメント

#### Task 7.1: コードの最適化とリファクタリング

- [ ] 不要なコードの削除
- [ ] コメントの追加（複雑なロジック部分）
- [ ] パフォーマンス最適化（useMemo、React.memoの適切な使用）
- [ ] アクセシビリティの確認（ARIA属性、キーボード操作）
- [ ] ESLint警告の解消
- **完了条件**: コードがクリーンで保守性が高い状態
- **依存**: Task 6.3
- **推定時間**: 1.5時間

#### Task 7.2: READMEとドキュメントの作成

- [ ] `README.md` の作成
- [ ] プロジェクト概要の記述
- [ ] セットアップ手順の記述
- [ ] 使用方法の記述
- [ ] 技術スタックの記述
- [ ] スクリーンショットの追加（オプション）
- [ ] ライセンス情報の追加
- **完了条件**: README.mdが完成し、第三者がプロジェクトを理解できる
- **依存**: Task 7.1
- **推定時間**: 1時間

#### Task 7.3: デプロイ準備

- [ ] ビルドコマンドの実行確認（`npm run build`）
- [ ] ビルド成果物の確認（dist/ディレクトリ）
- [ ] Vercel/Netlify/GitHub Pagesへのデプロイ設定
- [ ] デプロイの実行とURLの確認
- [ ] 本番環境での動作確認
- **完了条件**: アプリケーションが本番環境にデプロイされ、正常に動作する
- **依存**: Task 7.2
- **推定時間**: 1時間

## 実装順序

### 推奨実装フロー

1. **Phase 1（環境構築）** → 全タスク順次実行
2. **Phase 2（型定義とサービス層）** → Task 2.1 → Task 2.2
3. **Phase 3（状態管理）** → Task 3.1 → Task 3.2 → Task 3.3
4. **Phase 4（UIコンポーネント）**:
   - Task 4.1, Task 4.2, Task 4.4 は並行実行可能
   - Task 4.3 は Task 4.2 完了後
   - Task 4.5 は全てのコンポーネント完了後
5. **Phase 5（スタイリング）** → Task 5.1 → Task 5.2
6. **Phase 6（テスト）** → Task 6.1 と Task 6.2 は並行可能 → Task 6.3
7. **Phase 7（最終調整）** → Task 7.1 → Task 7.2 → Task 7.3

### 並行実行可能なタスク

- Task 1.2 と Task 1.3（環境構築フェーズ）
- Task 4.1, Task 4.2, Task 4.4（異なるコンポーネント）
- Task 6.1 と Task 6.2（異なる種類のテスト）

### クリティカルパス

```
Task 1.1 → Task 1.2 → Task 2.1 → Task 3.1 → Task 3.2 → Task 3.3 
→ Task 4.2 → Task 4.3 → Task 4.5 → Task 6.3 → Task 7.1 → Task 7.2 → Task 7.3
```

## リスクと対策

| リスク | 発生確率 | 対策 |
|--------|---------|------|
| localStorage容量制限に達する | 低 | QuotaExceededErrorのハンドリング、古いデータの削除機能 |
| ブラウザ互換性の問題 | 中 | crypto.randomUUID()のpolyfill、主要ブラウザでのテスト |
| パフォーマンス劣化（1000件超） | 低 | useMemoでの最適化、必要に応じて仮想スクロール導入 |
| TypeScript型エラー | 中 | 段階的な実装と型チェックの継続的実行 |
| 状態管理の複雑化 | 低 | シンプルなReducerパターンの維持、適切なコメント |

## 注意事項

### 開発時の注意点

- **コミット単位**: 各タスクは独立してコミット可能な単位で完結させる
- **型安全性**: すべてのコードでTypeScriptの型チェックをパスさせる
- **テスト駆動**: 重要なロジックは実装と同時にテストを作成する
- **コードレビュー**: 各Phaseごとに自己レビューを実施
- **ドキュメント**: 複雑なロジックには必ずコメントを追加

### 品質チェックリスト

各タスク完了時に以下を確認：

- [ ] TypeScriptエラーがない（`npm run build`が成功）
- [ ] ESLint警告がない
- [ ] ブラウザコンソールにエラーがない
- [ ] 期待通りの動作をする
- [ ] レスポンシブデザインが機能する
- [ ] アクセシビリティが考慮されている

### トラブルシューティング

- **問題発生時**: 速やかに報告し、解決策を検討
- **不明点**: 実装前に設計書を再確認、必要に応じて質問
- **技術的課題**: 公式ドキュメントやStack Overflowを参照

## 実装開始ガイド

### 開始前の確認事項

1. ✅ 要件定義書（`.tmp/requirements.md`）を理解している
2. ✅ 詳細設計書（`.tmp/design.md`）を理解している
3. ✅ 開発環境（Node.js、npm、エディタ）が準備されている
4. ✅ Gitリポジトリの初期化が完了している

### 実装の進め方

1. **タスクの開始**
   - TodoListで該当タスクを `in-progress` に更新
   - Gitで新しいブランチを作成（オプション）

2. **実装中**
   - チェックリストの項目を順次完了
   - 定期的にコミット（コミットメッセージは明確に）

3. **タスクの完了**
   - 完了条件をすべて満たしていることを確認
   - 品質チェックリストを確認
   - TodoListで該当タスクを `completed` に更新
   - Gitでコミット＆プッシュ

4. **問題発生時**
   - エラーメッセージとスタックトレースを記録
   - 速やかに報告または解決策を検索
   - 必要に応じてタスクを分割または調整

### 推奨開発フロー

```
Phase 1 完了 → 動作確認 → コミット
  ↓
Phase 2 完了 → 単体テスト → コミット
  ↓
Phase 3 完了 → 動作確認 → コミット
  ↓
Phase 4 完了 → 統合テスト → コミット
  ↓
Phase 5 完了 → UI確認 → コミット
  ↓
Phase 6 完了 → 全体テスト → コミット
  ↓
Phase 7 完了 → デプロイ → 完成🎉
```

---

**作成日**: 2025年12月19日  
**バージョン**: 1.0  
**ステータス**: レビュー待ち
